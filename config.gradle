import org.gradle.internal.os.OperatingSystem

nativeUtils.addWpiNativeUtils()

nativeUtils {
    wpi {
        configureDependencies {
            wpiVersion = "2024.3.2"
            opencvYear = "frc2024"
            googleTestYear = "frc2024"
            niLibVersion = "2024.2.1"
            opencvVersion = "4.8.0-2"
            googleTestVersion = "1.14.0-1"
        }
    }
}

nativeUtils.wpi.addWarnings()
nativeUtils.wpi.addWarningsAsErrors()

nativeUtils.setSinglePrintPerPlatform()

nativeUtils.wpi.addVendorDeps()
nativeUtils.wpi.getVendorDeps().loadAll()
nativeUtils.wpi.getVendorDeps().getNativeVendor().initializeNativeDependencies()
nativeUtils.wpi.getVendorDeps().addVendorReposToMaven(false)

model {
    // components {
    //     all {
    //         targetPlatform nativeUtils.wpi.platforms.roborio
    //     }
    // }
    // Uncomment this, and remove above lines to enable builds for all platforms
    components {
        all {
            nativeUtils.useAllPlatforms(it)
        }
    }
    binaries {
        withType(NativeBinarySpec).all {
            nativeUtils.usePlatformArguments(it)
            nativeUtils.wpi.getVendorDeps().getNativeVendor().cpp(it)
        }
    }
}
